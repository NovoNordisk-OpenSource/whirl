<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Logging package • whirl</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Logging package">
<meta name="description" content="Provides functionalities for running R scripts in batch, while simultaneously creating logs for each script execution.">
<meta property="og:description" content="Provides functionalities for running R scripts in batch, while simultaneously creating logs for each script execution.">
<meta property="og:image" content="https://novonordisk-opensource.github.io/whirl/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">whirl</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.8.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/whirl.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/example.html">Log example</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/novonordisk-opensource/whirl/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="whirl">whirl<a class="anchor" aria-label="anchor" href="#whirl"></a>
</h1>
</div>
<!-- badges: start -->

<!-- badges: end -->
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The whirl package provide functionalities for executing scripts in batch and simultaneously getting a log from the individual executions. A log from script execution is in many pharmaceutical companies a GxP requirement, and the whirl package honors this requirement by generating a log that, among other things, contains information about:</p>
<ul>
<li>Status (did the script run with any error or warnings)</li>
<li>The actual code itself</li>
<li>Date and time of execution</li>
<li>The environment the script was executed under (session info)</li>
<li>Information about packages versions that was utilized</li>
<li>Environmental variables</li>
</ul>
<p>And all this is wrapped into a nicely formatted html document that is easy to navigate.</p>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>The main function in the whirl package is <code><a href="reference/run.html">run()</a></code> which takes an <code>input</code> argument that defines the scripts to be executed.</p>
<p>The simplest way is to provide the path to a single script:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://novonordisk-opensource.github.io/whirl/">whirl</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/run.html">run</a></span><span class="op">(</span><span class="st">"success.R"</span><span class="op">)</span></span>
<span><span class="co">#&gt; ✔ success.R: Completed succesfully</span></span></code></pre></div>
<p>It is also possible to run several scripts simultaneously:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/run.html">run</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"success.R"</span>, <span class="st">"warning.R"</span><span class="op">)</span>, n_workers <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; ✔ success.R: Completed succesfully</span></span>
<span><span class="co">#&gt; ⚠ warning.R: Completed with warnings</span></span></code></pre></div>
<p>Here we are specifying that <code><a href="reference/run.html">run()</a></code> can use up to two simultaneous workers to execute the scripts, meaning that they will be executed in parallel.</p>
<p>When using <code><a href="reference/run.html">run()</a></code> the following files are created:</p>
<ol style="list-style-type: decimal">
<li>Creates a log in the same directory as the script with the names <code>{script_name}_log.html</code>. See <a href="https://novonordisk-opensource.github.io/whirl/articles/example_log.html">example_log.html</a> for an example of a simple log.</li>
<li>Creates a summary log with the overall status of each script. Default path is <code>summary.html</code>. See <a href="https://novonordisk-opensource.github.io/whirl/articles/summary.html">summary.html</a> for an example of a summary of the same log as above.</li>
</ol>
<p>Apart from this the function also returns a <code>tibble</code> with the status of the script execution similar to the content of the summary above:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 6</span></span>
<span><span class="co">#&gt;      id tag   script                                 status result       log_dir</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;                                  &lt;chr&gt;  &lt;list&gt;       &lt;chr&gt;  </span></span>
<span><span class="co">#&gt; 1     1 &lt;NA&gt;  /private/var/folders/fx/71by3f551qzb5… succe… &lt;named list&gt; /priva…</span></span>
<span><span class="co">#&gt; 2     2 &lt;NA&gt;  /private/var/folders/fx/71by3f551qzb5… warni… &lt;named list&gt; /priva…</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="config-files">Config files<a class="anchor" aria-label="anchor" href="#config-files"></a>
</h2>
<p><code><a href="reference/run.html">run()</a></code> also supports running scripts in several sequential steps. This setup is very useful when your projects have several steps that depends on each others output, and thereby need to be executed in a specific order. The best way to implement this in your project is use a configuration file for whirl. The configuration file is a <code>yaml</code> file that specifies each steps:</p>
<p><code>_whirl.yaml:</code></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">"First step"</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="at">    </span><span class="fu">paths</span><span class="kw">:</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">"success.R"</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">"Second step"</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="at">    </span><span class="fu">paths</span><span class="kw">:</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">"warning.R"</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">"error.R"</span><span class="at">``</span></span></code></pre></div>
<p>Here we are specifying that in the first step we run <code>succes.R</code>. And then when this step has been completed we continue to running the scripts in the second steps.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/run.html">run</a></span><span class="op">(</span><span class="st">"_whirl.yaml"</span>, n_workers <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; ✔ success.R: Completed succesfully</span></span>
<span><span class="co">#&gt; ⚠ warning.R: Completed with warnings</span></span>
<span><span class="co">#&gt; ✖ error.R: Completed with errors</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 6</span></span>
<span><span class="co">#&gt;      id tag   script                                 status result       log_dir</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;                                  &lt;chr&gt;  &lt;list&gt;       &lt;chr&gt;  </span></span>
<span><span class="co">#&gt; 1     1 &lt;NA&gt;  /private/var/folders/fx/71by3f551qzb5… succe… &lt;named list&gt; /priva…</span></span>
<span><span class="co">#&gt; 2     2 &lt;NA&gt;  /private/var/folders/fx/71by3f551qzb5… warni… &lt;named list&gt; /priva…</span></span>
<span><span class="co">#&gt; 3     3 &lt;NA&gt;  /private/var/folders/fx/71by3f551qzb5… error  &lt;named list&gt; /priva…</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="customize-run">Customize run()<a class="anchor" aria-label="anchor" href="#customize-run"></a>
</h2>
<p>For more information about how to customize the the execution and the logging for your needs see the following:</p>
<ul>
<li>
<code><a href="reference/run.html">run()</a></code>: For further information on how to call it.</li>
<li>
<code><a href="articles/whirl.html">vignette("whirl")</a></code>: For a more in depth explanation, and more advanced usage.</li>
<li>
<code><a href="articles/example.html">vignette("articles/example")</a></code>: With a simple example, including the created log.</li>
<li>
<code><a href="https://rdrr.io/r/base/options.html" class="external-link">options()</a></code>: On how to change the default behavior of whirl.</li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/novonordisk-opensource/whirl/" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>Apache License (&gt;= 2)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing whirl</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Aksel Thomsen <br><small class="roles"> Author, maintainer </small>  </li>
<li>Lovemore Gakava <br><small class="roles"> Author </small>  </li>
<li>Cervan Girard <br><small class="roles"> Author </small>  </li>
<li>Kristian Troejelsgaard <br><small class="roles"> Author </small>  </li>
<li>Steffen Falgreen Larsen <br><small class="roles"> Author </small>  </li>
<li>Vladimir Obucina <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/NovoNordisk-OpenSource/whirl/actions/workflows/check_and_co.yaml" class="external-link"><img src="https://github.com/NovoNordisk-OpenSource/whirl/actions/workflows/check_and_co.yaml/badge.svg" alt="Checks"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Aksel Thomsen, Lovemore Gakava, Cervan Girard, Kristian Troejelsgaard, Steffen Falgreen Larsen, Vladimir Obucina.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
