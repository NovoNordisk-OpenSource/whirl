<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Execute single or multiple R, R Markdown, and Quarto scripts — run • whirl</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Execute single or multiple R, R Markdown, and Quarto scripts — run"><meta name="description" content="Executes and logs the execution of the scripts.
Logs for each script are stored in the same folder as the script.
The way the execution is logged is configurable through several options for
e.g. the verbosity of the logs. See whirl-options on how to configure these."><meta property="og:description" content="Executes and logs the execution of the scripts.
Logs for each script are stored in the same folder as the script.
The way the execution is logged is configurable through several options for
e.g. the verbosity of the logs. See whirl-options on how to configure these."><meta property="og:image" content="https://novonordisk-opensource.github.io/whirl/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">whirl</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.10.9002</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/whirl.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/example.html">Log example</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/novonordisk-opensource/whirl/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Execute single or multiple R, R Markdown, and Quarto scripts</h1>
      <small class="dont-index">Source: <a href="https://github.com/novonordisk-opensource/whirl/blob/main/R/run.R" class="external-link"><code>R/run.R</code></a></small>
      <div class="d-none name"><code>run.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Executes and logs the execution of the scripts.
Logs for each script are stored in the same folder as the script.</p>
<p>The way the execution is logged is configurable through several options for
e.g. the verbosity of the logs. See <a href="whirl-options.html">whirl-options</a> on how to configure these.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">run</span><span class="op">(</span></span>
<span>  <span class="va">input</span>,</span>
<span>  steps <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  summary_file <span class="op">=</span> <span class="st">"summary.html"</span>,</span>
<span>  n_workers <span class="op">=</span> <span class="fu">zephyr</span><span class="fu">::</span><span class="fu"><a href="https://novonordisk-opensource.github.io/zephyr/reference/get_option.html" class="external-link">get_option</a></span><span class="op">(</span><span class="st">"n_workers"</span>, <span class="st">"whirl"</span><span class="op">)</span>,</span>
<span>  check_renv <span class="op">=</span> <span class="fu">zephyr</span><span class="fu">::</span><span class="fu"><a href="https://novonordisk-opensource.github.io/zephyr/reference/get_option.html" class="external-link">get_option</a></span><span class="op">(</span><span class="st">"check_renv"</span>, <span class="st">"whirl"</span><span class="op">)</span>,</span>
<span>  verbosity_level <span class="op">=</span> <span class="fu">zephyr</span><span class="fu">::</span><span class="fu"><a href="https://novonordisk-opensource.github.io/zephyr/reference/get_verbosity_level.html" class="external-link">get_verbosity_level</a></span><span class="op">(</span><span class="st">"whirl"</span><span class="op">)</span>,</span>
<span>  track_files <span class="op">=</span> <span class="fu">zephyr</span><span class="fu">::</span><span class="fu"><a href="https://novonordisk-opensource.github.io/zephyr/reference/get_option.html" class="external-link">get_option</a></span><span class="op">(</span><span class="st">"track_files"</span>, <span class="st">"whirl"</span><span class="op">)</span>,</span>
<span>  out_formats <span class="op">=</span> <span class="fu">zephyr</span><span class="fu">::</span><span class="fu"><a href="https://novonordisk-opensource.github.io/zephyr/reference/get_option.html" class="external-link">get_option</a></span><span class="op">(</span><span class="st">"out_formats"</span>, <span class="st">"whirl"</span><span class="op">)</span>,</span>
<span>  log_dir <span class="op">=</span> <span class="fu">zephyr</span><span class="fu">::</span><span class="fu"><a href="https://novonordisk-opensource.github.io/zephyr/reference/get_option.html" class="external-link">get_option</a></span><span class="op">(</span><span class="st">"log_dir"</span>, <span class="st">"whirl"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-input">input<a class="anchor" aria-label="anchor" href="#arg-input"></a></dt>
<dd><p>A character vector of file path(s) to R, R Markdown, Quarto
scripts, or files in a folder using regular expression, or to to a whirl
config file. The input can also be structured in a list where each element
will be executed sequentially, while scripts within each element can be
executed in parallel.</p></dd>


<dt id="arg-steps">steps<a class="anchor" aria-label="anchor" href="#arg-steps"></a></dt>
<dd><p>An optional argument that can be used if only certain steps
within a config files (or list) is to be executed. Should be equivalent to
the names of the steps found in the config file. If kept as NULL (default)
then all steps listed in the config file will be executed.</p></dd>


<dt id="arg-summary-file">summary_file<a class="anchor" aria-label="anchor" href="#arg-summary-file"></a></dt>
<dd><p>A character string specifying the file path where the
summary log will be stored.</p></dd>


<dt id="arg-n-workers">n_workers<a class="anchor" aria-label="anchor" href="#arg-n-workers"></a></dt>
<dd><p>Number of simultaneous workers used in the run function.
A maximum of 128 workers is allowed.. Default: <code>1</code>.</p></dd>


<dt id="arg-check-renv">check_renv<a class="anchor" aria-label="anchor" href="#arg-check-renv"></a></dt>
<dd><p>Should the projects renv status be checked?. Default: <code>FALSE</code>.</p></dd>


<dt id="arg-verbosity-level">verbosity_level<a class="anchor" aria-label="anchor" href="#arg-verbosity-level"></a></dt>
<dd><p>Verbosity level for functions in whirl.
See <a href="https://novonordisk-opensource.github.io/zephyr/reference/verbosity_level.html" class="external-link">zephyr::verbosity_level</a> for details.. Default: <code>NA_character_</code>.</p></dd>


<dt id="arg-track-files">track_files<a class="anchor" aria-label="anchor" href="#arg-track-files"></a></dt>
<dd><p>Should files read and written be tracked?
Currently only supported on Linux.. Default: <code>FALSE</code>.</p></dd>


<dt id="arg-out-formats">out_formats<a class="anchor" aria-label="anchor" href="#arg-out-formats"></a></dt>
<dd><p>Which log format(s) to produce. Possibilities are <code>html</code>,
<code>json</code>, and markdown formats: <code>gfm</code>, <code>commonmark</code>, and <code>markua</code>.. Default: <code>"html"</code>.</p></dd>


<dt id="arg-log-dir">log_dir<a class="anchor" aria-label="anchor" href="#arg-log-dir"></a></dt>
<dd><p>The output directory of the log files. Default is the folder of
the executed script. log_dir can be a path as a character or it can be a
function that takes the script path as input and returns the log directory.
For more information see the examples of <code>run()</code> or <code><a href="../articles/whirl.html">vignette('whirl')</a></code>.. Default: <code>function (x)  dirname(x)</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A tibble containing the execution results for all the scripts.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Start by copying the following three example scripts:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.copy</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"examples"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"success.R"</span>, <span class="st">"warning.R"</span>, <span class="st">"error.R"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    package <span class="op">=</span> <span class="st">"whirl"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  to <span class="op">=</span> <span class="st">"."</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE TRUE TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Run a single script</span></span></span>
<span class="r-in"><span><span class="fu">run</span><span class="op">(</span><span class="st">"success.R"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #87AFD7;">══ Executing scripts and generating logs ═══════════════════════════════════════</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> → Executing scripts in parallel using 1 cores</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following steps will be executed</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> Step 1: Unnamed chunk</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Step 1: Unnamed chunk</span> <span style="color: #00BBBB;">───────────────────────────────────────────────────────</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> success.R: Completed succesfully</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #87AFD7;">══ End of process ══════════════════════════════════════════════════════════════</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Run several scripts in parallel on up to 2 workers</span></span></span>
<span class="r-in"><span><span class="fu">run</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"success.R"</span>, <span class="st">"warning.R"</span>, <span class="st">"error.R"</span><span class="op">)</span>, n_workers <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #87AFD7;">══ Executing scripts and generating logs ═══════════════════════════════════════</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> → Executing scripts in parallel using 2 cores</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following steps will be executed</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> Step 1: Unnamed chunk</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Step 1: Unnamed chunk</span> <span style="color: #00BBBB;">───────────────────────────────────────────────────────</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">⚠</span> warning.R: Completed with warnings</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> success.R: Completed succesfully</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">✖</span> error.R: Completed with errors</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #87AFD7;">══ End of process ══════════════════════════════════════════════════════════════</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Run scripts in two steps by providing them as list elements</span></span></span>
<span class="r-in"><span><span class="fu">run</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"success.R"</span>, <span class="st">"warning.R"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="st">"error.R"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  n_workers <span class="op">=</span> <span class="fl">2</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #87AFD7;">══ Executing scripts and generating logs ═══════════════════════════════════════</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> → Executing scripts in parallel using 2 cores</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following steps will be executed</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> Step 1: Unnamed chunk</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> Step 2: Unnamed chunk</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Step 1: Unnamed chunk</span> <span style="color: #00BBBB;">───────────────────────────────────────────────────────</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> success.R: Completed succesfully</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">⚠</span> warning.R: Completed with warnings</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Step 2: Unnamed chunk</span> <span style="color: #00BBBB;">───────────────────────────────────────────────────────</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">✖</span> error.R: Completed with errors</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #87AFD7;">══ End of process ══════════════════════════════════════════════════════════════</span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Re-directing the logs to a sub-folder by utilizing the log_dir argument in</span></span></span>
<span class="r-in"><span><span class="co"># run(). This will require that the sub-folder exist and the code is</span></span></span>
<span class="r-in"><span><span class="co"># therefore not executed</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Specifying the path using a manually defined character</span></span></span>
<span class="r-in"><span><span class="fu">run</span><span class="op">(</span><span class="st">"success.R"</span>, log_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Specifying the path with a generic function that can handle the scripts</span></span></span>
<span class="r-in"><span><span class="co"># individually.</span></span></span>
<span class="r-in"><span><span class="fu">run</span><span class="op">(</span><span class="st">"success.R"</span>, log_dir <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">dirname</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="st">"/logs"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Aksel Thomsen, Lovemore Gakava, Cervan Girard, Kristian Troejelsgaard, Steffen Falgreen Larsen, Vladimir Obucina.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

